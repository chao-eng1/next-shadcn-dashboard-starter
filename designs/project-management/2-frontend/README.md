# 项目管理模块 - 前端设计

本文档详细描述项目管理模块的前端设计，包括页面布局、组件结构、交互流程和用户体验设计。

## 目录

1. [概述](#概述)
2. [页面架构](#页面架构)
3. [主要页面设计](#主要页面设计)
   - [项目列表页](#项目列表页)
   - [项目详情页](#项目详情页)
   - [任务看板页](#任务看板页)
   - [任务详情页](#任务详情页)
   - [迭代规划页](#迭代规划页)
   - [项目设置页](#项目设置页)
4. [组件设计](#组件设计)
   - [共享组件](#共享组件)
   - [特定组件](#特定组件)
5. [交互设计](#交互设计)
6. [响应式设计](#响应式设计)
7. [主题与样式](#主题与样式)

## 概述

项目管理模块的前端设计基于 Next.js 15 的 App Router 架构，结合 Shadcn UI 组件库和 Tailwind CSS 进行实现。设计遵循现代、简洁、高效的原则，确保良好的用户体验和高性能。

前端设计主要关注以下方面：

- 清晰的信息架构和导航
- 高效的任务管理和可视化
- 团队协作和实时反馈
- 响应式设计，支持多设备访问
- 主题支持，包括暗色模式

## 页面架构

项目管理模块的页面架构如下：

```
/dashboard
  /projects                  # 项目列表页
    /new                     # 新建项目页
    /[projectId]             # 项目详情页
      /overview              # 项目概览
      /tasks                 # 任务列表
        /new                 # 新建任务
        /[taskId]            # 任务详情
      /kanban                # 任务看板视图
      /sprints               # 迭代列表
        /new                 # 新建迭代
        /[sprintId]          # 迭代详情
      /team                  # 团队成员管理
      /files                 # 项目文件管理
      /settings              # 项目设置
```

## 主要页面设计

### 项目列表页

**路径**: `/dashboard/projects`

**功能**:

- 显示用户参与的所有项目
- 支持按状态、角色筛选项目
- 提供搜索功能
- 创建新项目的入口
- 显示项目关键信息(名称、状态、进度、团队规模等)

**页面组件**:

- 项目过滤器
- 项目卡片网格
- 分页控制
- 新建项目按钮

**界面草图**:

```
+-------------------------------------------------------------+
|                     项目管理                    🔍 搜索项目    |
+-------------------------------------------------------------+
| 状态: 全部 ▼ | 角色: 全部 ▼ | 排序: 最近更新 ▼ |  + 新建项目  |
+-------------------------------------------------------------+
|  +----------------+  +----------------+  +----------------+ |
|  | 项目A           |  | 项目B           |  | 项目C           | |
|  | 状态: 进行中     |  | 状态: 规划中     |  | 状态: 已完成     | |
|  | 进度: 65%       |  | 进度: 0%        |  | 进度: 100%      | |
|  | 成员: 5         |  | 成员: 3         |  | 成员: 7         | |
|  | 任务: 24/45     |  | 任务: 0/12      |  | 任务: 36/36     | |
|  +----------------+  +----------------+  +----------------+ |
|                                                             |
|  +----------------+  +----------------+  +----------------+ |
|  | 项目D           |  | 项目E           |  | + 新建项目      | |
|  | 状态: 进行中     |  | 状态: 已归档     |  |                | |
|  | 进度: 32%       |  | 进度: 100%      |  |                | |
|  | 成员: 4         |  | 成员: 6         |  |                | |
|  | 任务: 12/35     |  | 任务: 28/28     |  |                | |
|  +----------------+  +----------------+  +----------------+ |
|                                                             |
|                       < 1 2 3 ... >                         |
+-------------------------------------------------------------+
```

### 项目详情页

**路径**: `/dashboard/projects/[projectId]/overview`

**功能**:

- 显示项目的关键信息和统计数据
- 项目进度和状态可视化
- 最近活动时间线
- 关键截止日期提醒
- 项目成员概览

**页面组件**:

- 项目标题和描述
- 项目状态标志
- 进度指示器
- 统计卡片(总任务数、完成率、延期任务等)
- 活动时间线
- 团队成员列表

**界面草图**:

```
+-------------------------------------------------------------+
| 项目A                                            项目设置 ⚙️   |
+-------------------------------------------------------------+
| 概览 | 任务 | 看板 | 迭代 | 团队 | 文件                         |
+-------------------------------------------------------------+
| 项目状态: 进行中                         开始日期: 2023-01-15  |
| 项目进度: [==========75%===========]    截止日期: 2023-12-31  |
+-------------------------------------------------------------+
|                                                             |
| 项目统计                          | 团队成员 (5)               |
| +---------------+ +---------------+ | +---+ +---+ +---+     |
| | 总任务: 45     | | 已完成: 32    | | | U1| | U2| | U3| +添加 |
| +---------------+ +---------------+ | +---+ +---+ +---+     |
| +---------------+ +---------------+ |                       |
| | 进行中: 8      | | 延期: 5       | | 最近活动                |
| +---------------+ +---------------+ | • 用户A创建了任务X      |
|                                     | • 用户B完成了任务Y      |
| 迭代进度                             | • 用户C更新了任务Z的状态 |
| 当前迭代: Sprint 3 (6/15)            | • ...                  |
| [======40%======]                   |                       |
|                                     |                       |
+-------------------------------------------------------------+
```

### 任务看板页

**路径**: `/dashboard/projects/[projectId]/kanban`

**功能**:

- 显示任务的看板视图
- 支持拖放任务状态更新
- 过滤和搜索任务
- 添加新任务
- 快速编辑任务

**页面组件**:

- 看板列
- 任务卡片
- 拖放区域
- 过滤控件
- 任务快捷创建

**界面草图**:

```
+-------------------------------------------------------------+
| 项目A > 看板                                     + 新建任务   |
+-------------------------------------------------------------+
| 迭代: Sprint 3 ▼ | 分配给: 全部 ▼ | 标签: 全部 ▼ | 🔍 搜索    |
+-------------------------------------------------------------+
|  待处理         |  进行中        |  审核中        |  已完成     |
|  +-----------+ |  +-----------+ |  +-----------+ |            |
|  | 任务1      | |  | 任务4      | |  | 任务7      | |  +-----------+ |
|  | 高优先级    | |  | 中优先级    | |  | 低优先级    | |  | 任务10     | |
|  | @用户A      | |  | @用户B      | |  | @用户C      | |  | 中优先级    | |
|  +-----------+ |  +-----------+ |  +-----------+ |  | @用户A      | |
|                |                |                |  +-----------+ |
|  +-----------+ |  +-----------+ |  +-----------+ |                |
|  | 任务2      | |  | 任务5      | |  | 任务8      | |  +-----------+ |
|  | 中优先级    | |  | 高优先级    | |  | 中优先级    | |  | 任务11     | |
|  | @用户B      | |  | @用户A      | |  | @用户B      | |  | 低优先级    | |
|  +-----------+ |  +-----------+ |  +-----------+ |  | @用户C      | |
|                |                |                |  +-----------+ |
|  +-----------+ |  +-----------+ |  +-----------+ |                |
|  | 任务3      | |  | 任务6      | |  | 任务9      | |  +-----------+ |
|  | 低优先级    | |  | 中优先级    | |  | 高优先级    | |  | 任务12     | |
|  | @用户C      | |  | @用户C      | |  | @用户A      | |  | 高优先级    | |
|  +-----------+ |  +-----------+ |  +-----------+ |  | @用户B      | |
|                |                |                |  +-----------+ |
|  + 添加任务    |  + 添加任务    |  + 添加任务    |  + 添加任务    |
+-------------------------------------------------------------+
```

### 任务详情页

**路径**: `/dashboard/projects/[projectId]/tasks/[taskId]`

**功能**:

- 显示任务的详细信息
- 编辑任务属性
- 管理子任务
- 添加评论和附件
- 更新任务状态
- 分配任务给团队成员

**页面组件**:

- 任务标题和描述编辑器
- 任务属性表单
- 子任务列表
- 评论线程
- 附件上传区
- 任务历史记录

**界面草图**:

```
+-------------------------------------------------------------+
| 项目A > 任务 > 任务标题                                       |
+-------------------------------------------------------------+
|                                                             |
| 标题: [任务标题输入框]                                        |
|                                                             |
| 描述:                                                       |
| [富文本编辑器区域]                                            |
|                                                             |
+-------------------------------------------------------------+
| 任务属性                        | 子任务 (2/5)                |
| 状态: 进行中 ▼                  | ☐ 子任务1                   |
| 优先级: 高 ▼                    | ☑ 子任务2                   |
| 截止日期: [日期选择器]           | ☑ 子任务3                   |
| 预估时间: [时间输入] 小时         | ☐ 子任务4                   |
| 分配给: [用户选择器]             | ☐ 子任务5                   |
| 标签: [标签选择器]               | + 添加子任务                 |
+-------------------------------------------------------------+
| 评论 (5)                                                    |
| +-----------------------------------------------------------+
| | 用户A - 3小时前                                            |
| | 评论内容...                                                |
| +-----------------------------------------------------------+
| | 用户B - 昨天                                               |
| | 评论内容...                                                |
| +-----------------------------------------------------------+
| [评论输入框]                                   发送评论        |
+-------------------------------------------------------------+
| 附件 (3)                                                    |
| 📄 文件1.pdf                                                 |
| 📄 文件2.docx                                                |
| 📄 文件3.png                                                 |
| [拖放文件到此处或点击上传]                                     |
+-------------------------------------------------------------+
| 任务历史                                                     |
| • 用户A 创建了此任务 - 3天前                                   |
| • 用户B 将状态从"待处理"更改为"进行中" - 2天前                  |
| • 用户A 添加了评论 - 3小时前                                   |
+-------------------------------------------------------------+
```

### 迭代规划页

**路径**: `/dashboard/projects/[projectId]/sprints`

**功能**:

- 显示项目的所有迭代周期
- 创建新的迭代周期
- 查看迭代详情
- 将任务分配到迭代中
- 迭代进度和统计信息

**页面组件**:

- 迭代时间线
- 迭代卡片
- 迭代统计图表
- 任务分配面板
- 迭代规划日历

**界面草图**:

```
+-------------------------------------------------------------+
| 项目A > 迭代                                     + 新建迭代   |
+-------------------------------------------------------------+
|                                                             |
| 迭代时间线                                                   |
| [已完成] [已完成] [当前] [计划中] [计划中]                     |
| Sprint 1   Sprint 2   Sprint 3   Sprint 4   Sprint 5        |
| 1/1-1/14   1/15-1/28  1/29-2/11  2/12-2/25  2/26-3/11      |
|                                                             |
+-------------------------------------------------------------+
| 当前迭代: Sprint 3 (1/29 - 2/11)                             |
| 状态: 进行中                                                 |
| 目标: [迭代目标描述]                                          |
| 进度: [======40%======]                                      |
+-------------------------------------------------------------+
| 迭代统计                                                     |
| +---------------+ +---------------+ +---------------+        |
| | 总任务: 15    | | 已完成: 6     | | 剩余: 9       |        |
| +---------------+ +---------------+ +---------------+        |
|                                                             |
| 燃尽图                                                       |
| [燃尽图图表区域]                                              |
|                                                             |
+-------------------------------------------------------------+
| 迭代任务                                       + 添加任务     |
| 🔍 搜索任务                                                  |
|                                                             |
| ☐ 任务1 (高) - @用户A                                        |
| ☑ 任务2 (中) - @用户B                                        |
| ☑ 任务3 (低) - @用户C                                        |
| ☐ 任务4 (高) - @用户A                                        |
| ☑ 任务5 (中) - @用户B                                        |
| ☐ 任务6 (高) - @用户C                                        |
| ...                                                         |
+-------------------------------------------------------------+
```

### 项目设置页

**路径**: `/dashboard/projects/[projectId]/settings`

**功能**:

- 编辑项目基本信息
- 管理项目成员和权限
- 自定义项目工作流
- 项目通知设置
- 标签管理
- 项目归档/删除

**页面组件**:

- 项目信息表单
- 成员管理表格
- 工作流编辑器
- 通知设置面板
- 标签管理器
- 项目操作按钮

**界面草图**:

```
+-------------------------------------------------------------+
| 项目A > 设置                                                 |
+-------------------------------------------------------------+
|                                                             |
| 基本信息                                                     |
| 项目名称: [输入框]                                            |
| 描述: [文本区域]                                              |
| 开始日期: [日期选择器]                                        |
| 结束日期: [日期选择器]                                        |
| 项目状态: [下拉选择器]                                        |
| 可见性: [下拉选择器]                                          |
|                                         [保存更改]           |
+-------------------------------------------------------------+
| 团队成员                                      + 添加成员      |
|                                                             |
| | 成员           | 角色          | 加入日期    | 操作         |
| | 用户A          | 所有者        | 2023-01-15 | 更改角色 删除 |
| | 用户B          | 管理员        | 2023-01-16 | 更改角色 删除 |
| | 用户C          | 成员          | 2023-01-18 | 更改角色 删除 |
| | 用户D          | 查看者        | 2023-01-20 | 更改角色 删除 |
|                                                             |
+-------------------------------------------------------------+
| 任务工作流                                                   |
| 状态管理:                                                    |
| | 状态名称       | 颜色         | 顺序        | 操作         |
| | 待处理        | #3498db     | 1          | 编辑 删除     |
| | 进行中        | #f39c12     | 2          | 编辑 删除     |
| | 审核中        | #9b59b6     | 3          | 编辑 删除     |
| | 已完成        | #2ecc71     | 4          | 编辑 删除     |
| | 已关闭        | #95a5a6     | 5          | 编辑 删除     |
| + 添加状态                                                   |
+-------------------------------------------------------------+
| 标签管理                                      + 新建标签      |
| | 标签名称       | 颜色         | 使用次数    | 操作         |
| | 功能          | #3498db     | 12         | 编辑 删除     |
| | 错误          | #e74c3c     | 8          | 编辑 删除     |
| | 优化          | #2ecc71     | 5          | 编辑 删除     |
| | 文档          | #f39c12     | 3          | 编辑 删除     |
|                                                             |
+-------------------------------------------------------------+
| 危险区域                                                     |
| 归档项目: 项目将被归档并设为只读状态     [归档项目]            |
| 删除项目: 此操作不可逆，将永久删除项目    [删除项目]            |
+-------------------------------------------------------------+
```

## 组件设计

### 共享组件

项目管理模块将重用现有的共享组件，并开发新的专用组件：

1. **重用的共享组件**:

   - Shadcn UI 组件库中的基础组件
   - 布局组件 (Header, Sidebar, Footer)
   - 表单组件 (Input, Select, DatePicker)
   - 数据展示组件 (Table, Card, Badge)
   - 交互组件 (Modal, Dropdown, Tabs)

2. **项目管理专用组件**:
   - ProjectCard - 项目卡片
   - TaskCard - 任务卡片
   - KanbanBoard - 看板面板
   - TaskForm - 任务表单
   - SprintTimeline - 迭代时间线
   - BurndownChart - 燃尽图
   - MemberAvatar - 成员头像
   - CommentThread - 评论线程
   - AttachmentList - 附件列表
   - TaskPriority - 任务优先级指示器

### 特定组件

以下是需要专门设计的核心组件详情：

**1. 项目卡片 (ProjectCard)**

用于在项目列表页面显示项目概览信息。

```tsx
// 组件结构
<ProjectCard
  id='project-id'
  name='项目名称'
  description='项目描述'
  status='ACTIVE'
  progress={65}
  memberCount={5}
  taskStats={{ total: 45, completed: 32 }}
  startDate='2023-01-15'
  endDate='2023-12-31'
/>
```

**2. 看板组件 (KanbanBoard)**

可拖拽的任务看板，用于可视化任务状态。

```tsx
// 组件结构
<KanbanBoard
  columns={[
    { id: 'todo', title: '待处理', tasks: [...] },
    { id: 'in-progress', title: '进行中', tasks: [...] },
    { id: 'review', title: '审核中', tasks: [...] },
    { id: 'done', title: '已完成', tasks: [...] }
  ]}
  onTaskMove={(taskId, sourceColumn, targetColumn) => {...}}
  onAddTask={(columnId) => {...}}
/>
```

**3. 燃尽图 (BurndownChart)**

显示迭代进度和任务完成趋势的图表组件。

```tsx
// 组件结构
<BurndownChart
  sprintId='sprint-id'
  startDate='2023-01-29'
  endDate='2023-02-11'
  idealBurndown={[45, 42, 39, 36, 33, 30, 27, 24, 21, 18, 15, 12, 9, 6, 3, 0]}
  actualBurndown={[
    45,
    44,
    42,
    40,
    38,
    35,
    32,
    30,
    27,
    25,
    22,
    18,
    15,
    12,
    null,
    null
  ]}
  remainingPoints={15}
/>
```

## 交互设计

项目管理模块的交互设计遵循以下原则：

1. **直观性**: 用户应该能够直观理解如何使用各项功能
2. **反馈**: 所有用户操作都应该有明确的反馈
3. **效率**: 优化常用工作流程，减少点击次数
4. **一致性**: 保持与系统其他部分的交互一致性

关键交互设计包括：

- **拖放操作**: 看板任务状态更新、迭代任务分配
- **内联编辑**: 快速编辑任务标题、描述、属性
- **实时通知**: 团队成员活动和任务更新通知
- **快捷操作**: 任务快速创建、状态变更、评论
- **上下文菜单**: 右键点击项目和任务的快捷操作
- **键盘快捷键**: 提高高级用户的效率

## 响应式设计

项目管理模块支持从桌面到移动设备的响应式设计：

- **桌面视图** (>1024px): 全功能视图，多列布局，高级功能全显示
- **平板视图** (768px-1024px): 适度简化布局，保留核心功能
- **移动视图** (<768px): 单列布局，隐藏部分高级功能，专注核心任务

核心响应式策略：

- 使用流式布局和弹性网格
- 关键内容优先显示
- 导航菜单在小屏幕上折叠
- 看板在移动设备上转为列表视图
- 使用虚拟滚动处理大量数据

## 主题与样式

项目管理模块的样式基于应用的全局主题系统，支持明暗两种模式，并使用 Tailwind CSS 进行实现。

颜色方案:

- 主色调: 蓝色系 (#3498db)
- 成功/完成: 绿色系 (#2ecc71)
- 警告/进行中: 橙色系 (#f39c12)
- 错误/风险: 红色系 (#e74c3c)
- 中性/次要: 灰色系 (#95a5a6)

排版:

- 主要字体: 系统无衬线字体
- 标题字重: 600
- 正文字重: 400
- 响应式字号调整

一致的组件样式:

- 圆角: 0.5rem (8px)
- 阴影: 轻微阴影增强层次感
- 动画: 简洁的过渡动画增强交互体验
- 间距: 遵循 4的倍数的栅格系统
